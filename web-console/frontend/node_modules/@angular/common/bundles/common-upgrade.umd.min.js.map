{"version":3,"sources":["packages/common/common-upgrade.umd.js"],"names":["global","factory","exports","module","require","define","amd","self","ng","common","upgrade","core","static","this","_static","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","PATH_MATCH","DOUBLE_SLASH_REGEX","IGNORE_URI_REGEXP","DEFAULT_PORTS","http:","https:","ftp:","$locationShim","$injector","location","platformLocation","urlCodec","locationStrategy","_this","initalizing","updateBrowser","$$absUrl","$$url","$$host","$$replace","$$path","$$search","$$hash","$$changeListeners","cachedState","lastBrowserUrl","lastCachedState","initialUrl","browserUrl","parsedUrl","parse","$$protocol","protocol","hostname","$$port","parseInt","port","$$parseLinkUrl","cacheState","$$state","browserState","isPromise","obj","then","$i","initialize","$rootScope","get","$rootElement","on","event","ctrlKey","metaKey","shiftKey","which","button","elm","target","nodeName","toLowerCase","parentNode","isAnchor","el","undefined","href","absHref","relHref","getAttribute","test","isDefaultPrevented","preventDefault","absUrl","$apply","onUrlChange","newUrl","newState","oldUrl","oldState","$$parse","defaultPrevented","$broadcast","state","setBrowserUrlWithFallback","resetBrowserUpdate","$$phase","$digest","$watch","oldUrl_1","oldState_1","currentReplace_1","urlOrStateChanged_1","areEqual","$evalAsync","url","replace","sameState","lastHistoryState","stripBaseUrl","getServerBase","replaceState","pushState","getState","deepEqual","a","b","Array","isArray","JSON","stringify","e","base","startsWith","substr","_a","getBaseHref","endsWith","parseAppUrl","Error","prefixed","charAt","match","path","pathname","substring","decodePath","decodeSearch","search","decodeHash","hash","onChange","fn","err","push","$$notifyChangeListeners","forEach","_b","__read","o","m","Symbol","iterator","r","ar","next","done","value","error","pathUrl","composeUrls","slice","rewrittenUrl","appUrl","normalize","exec","host","toString","paramValue","key","currentSearch","$locationShimProvider","ngUpgrade","$get","hashPrefix","prefix","html5Mode","mode","UrlCodec","AngularJSUrlCodec","encodePath","segments","split","encodeUriSegment","_stripIndexHtml","join","encodeSearch","parseKeyValue","toKeyValue","parts","_loop_1","arrayValue","encodeUriQuery","encodeHash","decodeURIComponent","pathOrHref","baseUrl","parsed","serverUrl","encPath","encSearch","encHash","joinedPath","valA","valB","URL","tryDecodeURIComponent","keyValue","splitPoint","val","indexOf","pctEncodeSpaces","encodeURIComponent","LOCATION_UPGRADE_CONFIGURATION","InjectionToken","APP_BASE_HREF_RESOLVED","LocationUpgradeModule","LocationUpgradeModule_1","config","ngModule","providers","Location","provide","useFactory","provide$location","deps","UpgradeModule","PlatformLocation","LocationStrategy","useValue","provideUrlCodec","provideAppBaseHref","Inject","APP_BASE_HREF","Optional","provideLocationStrategy","__decorate","decorators","desc","d","c","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","NgModule","imports","CommonModule","appBaseHref","baseHref","options","useHash","HashLocationStrategy","PathLocationStrategy","ɵangular_packages_common_upgrade_upgrade_d","ɵangular_packages_common_upgrade_upgrade_a","ɵangular_packages_common_upgrade_upgrade_c","ɵangular_packages_common_upgrade_upgrade_b"],"mappings":"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","sourcesContent":["/**\n * @license Angular v8.2.14\n * (c) 2010-2019 Google LLC. https://angular.io/\n * License: MIT\n */\n\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/common'), require('@angular/core'), require('@angular/upgrade/static')) :\n    typeof define === 'function' && define.amd ? define('@angular/common/upgrade', ['exports', '@angular/common', '@angular/core', '@angular/upgrade/static'], factory) :\n    (global = global || self, factory((global.ng = global.ng || {}, global.ng.common = global.ng.common || {}, global.ng.common.upgrade = {}), global.ng.common, global.ng.core, global.ng.upgrade.static));\n}(this, function (exports, common, core, _static) { 'use strict';\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\r\n    /* global Reflect, Promise */\r\n\r\n    var extendStatics = function(d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n\r\n    function __extends(d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    }\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\r\n\r\n    function __rest(s, e) {\r\n        var t = {};\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n            t[p] = s[p];\r\n        if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n            for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n                t[p[i]] = s[p[i]];\r\n        return t;\r\n    }\r\n\r\n    function __decorate(decorators, target, key, desc) {\r\n        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n        if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n        else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n        return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n    }\r\n\r\n    function __param(paramIndex, decorator) {\r\n        return function (target, key) { decorator(target, key, paramIndex); }\r\n    }\r\n\r\n    function __metadata(metadataKey, metadataValue) {\r\n        if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n    }\r\n\r\n    function __awaiter(thisArg, _arguments, P, generator) {\r\n        return new (P || (P = Promise))(function (resolve, reject) {\r\n            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n            function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n            function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n        });\r\n    }\r\n\r\n    function __generator(thisArg, body) {\r\n        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n        return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n        function verb(n) { return function (v) { return step([n, v]); }; }\r\n        function step(op) {\r\n            if (f) throw new TypeError(\"Generator is already executing.\");\r\n            while (_) try {\r\n                if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n                if (y = 0, t) op = [op[0] & 2, t.value];\r\n                switch (op[0]) {\r\n                    case 0: case 1: t = op; break;\r\n                    case 4: _.label++; return { value: op[1], done: false };\r\n                    case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                    case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                    default:\r\n                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                        if (t[2]) _.ops.pop();\r\n                        _.trys.pop(); continue;\r\n                }\r\n                op = body.call(thisArg, _);\r\n            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n        }\r\n    }\r\n\r\n    function __exportStar(m, exports) {\r\n        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n    }\r\n\r\n    function __values(o) {\r\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n        if (m) return m.call(o);\r\n        return {\r\n            next: function () {\r\n                if (o && i >= o.length) o = void 0;\r\n                return { value: o && o[i++], done: !o };\r\n            }\r\n        };\r\n    }\r\n\r\n    function __read(o, n) {\r\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n        if (!m) return o;\r\n        var i = m.call(o), r, ar = [], e;\r\n        try {\r\n            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n        }\r\n        catch (error) { e = { error: error }; }\r\n        finally {\r\n            try {\r\n                if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n            }\r\n            finally { if (e) throw e.error; }\r\n        }\r\n        return ar;\r\n    }\r\n\r\n    function __spread() {\r\n        for (var ar = [], i = 0; i < arguments.length; i++)\r\n            ar = ar.concat(__read(arguments[i]));\r\n        return ar;\r\n    }\r\n\r\n    function __await(v) {\r\n        return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n    }\r\n\r\n    function __asyncGenerator(thisArg, _arguments, generator) {\r\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n        var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n        return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n        function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n        function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n        function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n        function fulfill(value) { resume(\"next\", value); }\r\n        function reject(value) { resume(\"throw\", value); }\r\n        function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n    }\r\n\r\n    function __asyncDelegator(o) {\r\n        var i, p;\r\n        return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n        function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n    }\r\n\r\n    function __asyncValues(o) {\r\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n        var m = o[Symbol.asyncIterator], i;\r\n        return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n        function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n        function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n    }\r\n\r\n    function __makeTemplateObject(cooked, raw) {\r\n        if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n        return cooked;\r\n    };\r\n\r\n    function __importStar(mod) {\r\n        if (mod && mod.__esModule) return mod;\r\n        var result = {};\r\n        if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n        result.default = mod;\r\n        return result;\r\n    }\r\n\r\n    function __importDefault(mod) {\r\n        return (mod && mod.__esModule) ? mod : { default: mod };\r\n    }\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    function stripPrefix(val, prefix) {\n        return val.startsWith(prefix) ? val.substring(prefix.length) : val;\n    }\n    function deepEqual(a, b) {\n        if (a === b) {\n            return true;\n        }\n        else if (!a || !b) {\n            return false;\n        }\n        else {\n            try {\n                if ((a.prototype !== b.prototype) || (Array.isArray(a) && Array.isArray(b))) {\n                    return false;\n                }\n                return JSON.stringify(a) === JSON.stringify(b);\n            }\n            catch (e) {\n                return false;\n            }\n        }\n    }\n    function isAnchor(el) {\n        return el.href !== undefined;\n    }\n    function isPromise(obj) {\n        // allow any Promise/A+ compliant thenable.\n        // It's up to the caller to ensure that obj.then conforms to the spec\n        return !!obj && typeof obj.then === 'function';\n    }\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    var PATH_MATCH = /^([^?#]*)(\\?([^#]*))?(#(.*))?$/;\n    var DOUBLE_SLASH_REGEX = /^\\s*[\\\\/]{2,}/;\n    var IGNORE_URI_REGEXP = /^\\s*(javascript|mailto):/i;\n    var DEFAULT_PORTS = {\n        'http:': 80,\n        'https:': 443,\n        'ftp:': 21\n    };\n    /**\n     * Location service that provides a drop-in replacement for the $location service\n     * provided in AngularJS.\n     *\n     * @see [Using the Angular Unified Location Service](guide/upgrade#using-the-unified-angular-location-service)\n     *\n     * @publicApi\n     */\n    var $locationShim = /** @class */ (function () {\n        function $locationShim($injector, location, platformLocation, urlCodec, locationStrategy) {\n            var _this = this;\n            this.location = location;\n            this.platformLocation = platformLocation;\n            this.urlCodec = urlCodec;\n            this.locationStrategy = locationStrategy;\n            this.initalizing = true;\n            this.updateBrowser = false;\n            this.$$absUrl = '';\n            this.$$url = '';\n            this.$$host = '';\n            this.$$replace = false;\n            this.$$path = '';\n            this.$$search = '';\n            this.$$hash = '';\n            this.$$changeListeners = [];\n            this.cachedState = null;\n            this.lastBrowserUrl = '';\n            // This variable should be used *only* inside the cacheState function.\n            this.lastCachedState = null;\n            var initialUrl = this.browserUrl();\n            var parsedUrl = this.urlCodec.parse(initialUrl);\n            if (typeof parsedUrl === 'string') {\n                throw 'Invalid URL';\n            }\n            this.$$protocol = parsedUrl.protocol;\n            this.$$host = parsedUrl.hostname;\n            this.$$port = parseInt(parsedUrl.port) || DEFAULT_PORTS[parsedUrl.protocol] || null;\n            this.$$parseLinkUrl(initialUrl, initialUrl);\n            this.cacheState();\n            this.$$state = this.browserState();\n            if (isPromise($injector)) {\n                $injector.then(function ($i) { return _this.initialize($i); });\n            }\n            else {\n                this.initialize($injector);\n            }\n        }\n        $locationShim.prototype.initialize = function ($injector) {\n            var _this = this;\n            var $rootScope = $injector.get('$rootScope');\n            var $rootElement = $injector.get('$rootElement');\n            $rootElement.on('click', function (event) {\n                if (event.ctrlKey || event.metaKey || event.shiftKey || event.which === 2 ||\n                    event.button === 2) {\n                    return;\n                }\n                var elm = event.target;\n                // traverse the DOM up to find first A tag\n                while (elm && elm.nodeName.toLowerCase() !== 'a') {\n                    // ignore rewriting if no A tag (reached root element, or no parent - removed from document)\n                    if (elm === $rootElement[0] || !(elm = elm.parentNode)) {\n                        return;\n                    }\n                }\n                if (!isAnchor(elm)) {\n                    return;\n                }\n                var absHref = elm.href;\n                var relHref = elm.getAttribute('href');\n                // Ignore when url is started with javascript: or mailto:\n                if (IGNORE_URI_REGEXP.test(absHref)) {\n                    return;\n                }\n                if (absHref && !elm.getAttribute('target') && !event.isDefaultPrevented()) {\n                    if (_this.$$parseLinkUrl(absHref, relHref)) {\n                        // We do a preventDefault for all urls that are part of the AngularJS application,\n                        // in html5mode and also without, so that we are able to abort navigation without\n                        // getting double entries in the location history.\n                        event.preventDefault();\n                        // update location manually\n                        if (_this.absUrl() !== _this.browserUrl()) {\n                            $rootScope.$apply();\n                        }\n                    }\n                }\n            });\n            this.location.onUrlChange(function (newUrl, newState) {\n                var oldUrl = _this.absUrl();\n                var oldState = _this.$$state;\n                _this.$$parse(newUrl);\n                newUrl = _this.absUrl();\n                _this.$$state = newState;\n                var defaultPrevented = $rootScope.$broadcast('$locationChangeStart', newUrl, oldUrl, newState, oldState)\n                    .defaultPrevented;\n                // if the location was changed by a `$locationChangeStart` handler then stop\n                // processing this location change\n                if (_this.absUrl() !== newUrl)\n                    return;\n                // If default was prevented, set back to old state. This is the state that was locally\n                // cached in the $location service.\n                if (defaultPrevented) {\n                    _this.$$parse(oldUrl);\n                    _this.state(oldState);\n                    _this.setBrowserUrlWithFallback(oldUrl, false, oldState);\n                }\n                else {\n                    _this.initalizing = false;\n                    $rootScope.$broadcast('$locationChangeSuccess', newUrl, oldUrl, newState, oldState);\n                    _this.resetBrowserUpdate();\n                }\n                if (!$rootScope.$$phase) {\n                    $rootScope.$digest();\n                }\n            });\n            // update browser\n            $rootScope.$watch(function () {\n                if (_this.initalizing || _this.updateBrowser) {\n                    _this.updateBrowser = false;\n                    var oldUrl_1 = _this.browserUrl();\n                    var newUrl = _this.absUrl();\n                    var oldState_1 = _this.browserState();\n                    var currentReplace_1 = _this.$$replace;\n                    var urlOrStateChanged_1 = !_this.urlCodec.areEqual(oldUrl_1, newUrl) || oldState_1 !== _this.$$state;\n                    // Fire location changes one time to on initialization. This must be done on the\n                    // next tick (thus inside $evalAsync()) in order for listeners to be registered\n                    // before the event fires. Mimicing behavior from $locationWatch:\n                    // https://github.com/angular/angular.js/blob/master/src/ng/location.js#L983\n                    if (_this.initalizing || urlOrStateChanged_1) {\n                        _this.initalizing = false;\n                        $rootScope.$evalAsync(function () {\n                            // Get the new URL again since it could have changed due to async update\n                            var newUrl = _this.absUrl();\n                            var defaultPrevented = $rootScope\n                                .$broadcast('$locationChangeStart', newUrl, oldUrl_1, _this.$$state, oldState_1)\n                                .defaultPrevented;\n                            // if the location was changed by a `$locationChangeStart` handler then stop\n                            // processing this location change\n                            if (_this.absUrl() !== newUrl)\n                                return;\n                            if (defaultPrevented) {\n                                _this.$$parse(oldUrl_1);\n                                _this.$$state = oldState_1;\n                            }\n                            else {\n                                // This block doesn't run when initalizing because it's going to perform the update to\n                                // the URL which shouldn't be needed when initalizing.\n                                if (urlOrStateChanged_1) {\n                                    _this.setBrowserUrlWithFallback(newUrl, currentReplace_1, oldState_1 === _this.$$state ? null : _this.$$state);\n                                    _this.$$replace = false;\n                                }\n                                $rootScope.$broadcast('$locationChangeSuccess', newUrl, oldUrl_1, _this.$$state, oldState_1);\n                            }\n                        });\n                    }\n                }\n                _this.$$replace = false;\n            });\n        };\n        $locationShim.prototype.resetBrowserUpdate = function () {\n            this.$$replace = false;\n            this.$$state = this.browserState();\n            this.updateBrowser = false;\n            this.lastBrowserUrl = this.browserUrl();\n        };\n        $locationShim.prototype.browserUrl = function (url, replace, state) {\n            // In modern browsers `history.state` is `null` by default; treating it separately\n            // from `undefined` would cause `$browser.url('/foo')` to change `history.state`\n            // to undefined via `pushState`. Instead, let's change `undefined` to `null` here.\n            if (typeof state === 'undefined') {\n                state = null;\n            }\n            // setter\n            if (url) {\n                var sameState = this.lastHistoryState === state;\n                // Normalize the inputted URL\n                url = this.urlCodec.parse(url).href;\n                // Don't change anything if previous and current URLs and states match.\n                if (this.lastBrowserUrl === url && sameState) {\n                    return this;\n                }\n                this.lastBrowserUrl = url;\n                this.lastHistoryState = state;\n                // Remove server base from URL as the Angular APIs for updating URL require\n                // it to be the path+.\n                url = this.stripBaseUrl(this.getServerBase(), url) || url;\n                // Set the URL\n                if (replace) {\n                    this.locationStrategy.replaceState(state, '', url, '');\n                }\n                else {\n                    this.locationStrategy.pushState(state, '', url, '');\n                }\n                this.cacheState();\n                return this;\n                // getter\n            }\n            else {\n                return this.platformLocation.href;\n            }\n        };\n        $locationShim.prototype.cacheState = function () {\n            // This should be the only place in $browser where `history.state` is read.\n            this.cachedState = this.platformLocation.getState();\n            if (typeof this.cachedState === 'undefined') {\n                this.cachedState = null;\n            }\n            // Prevent callbacks fo fire twice if both hashchange & popstate were fired.\n            if (deepEqual(this.cachedState, this.lastCachedState)) {\n                this.cachedState = this.lastCachedState;\n            }\n            this.lastCachedState = this.cachedState;\n            this.lastHistoryState = this.cachedState;\n        };\n        /**\n         * This function emulates the $browser.state() function from AngularJS. It will cause\n         * history.state to be cached unless changed with deep equality check.\n         */\n        $locationShim.prototype.browserState = function () { return this.cachedState; };\n        $locationShim.prototype.stripBaseUrl = function (base, url) {\n            if (url.startsWith(base)) {\n                return url.substr(base.length);\n            }\n            return undefined;\n        };\n        $locationShim.prototype.getServerBase = function () {\n            var _a = this.platformLocation, protocol = _a.protocol, hostname = _a.hostname, port = _a.port;\n            var baseHref = this.locationStrategy.getBaseHref();\n            var url = protocol + \"//\" + hostname + (port ? ':' + port : '') + (baseHref || '/');\n            return url.endsWith('/') ? url : url + '/';\n        };\n        $locationShim.prototype.parseAppUrl = function (url) {\n            if (DOUBLE_SLASH_REGEX.test(url)) {\n                throw new Error(\"Bad Path - URL cannot start with double slashes: \" + url);\n            }\n            var prefixed = (url.charAt(0) !== '/');\n            if (prefixed) {\n                url = '/' + url;\n            }\n            var match = this.urlCodec.parse(url, this.getServerBase());\n            if (typeof match === 'string') {\n                throw new Error(\"Bad URL - Cannot parse URL: \" + url);\n            }\n            var path = prefixed && match.pathname.charAt(0) === '/' ? match.pathname.substring(1) : match.pathname;\n            this.$$path = this.urlCodec.decodePath(path);\n            this.$$search = this.urlCodec.decodeSearch(match.search);\n            this.$$hash = this.urlCodec.decodeHash(match.hash);\n            // make sure path starts with '/';\n            if (this.$$path && this.$$path.charAt(0) !== '/') {\n                this.$$path = '/' + this.$$path;\n            }\n        };\n        /**\n         * Registers listeners for URL changes. This API is used to catch updates performed by the\n         * AngularJS framework. These changes are a subset of the `$locationChangeStart` and\n         * `$locationChangeSuccess` events which fire when AngularJS updates its internally-referenced\n         * version of the browser URL.\n         *\n         * It's possible for `$locationChange` events to happen, but for the browser URL\n         * (window.location) to remain unchanged. This `onChange` callback will fire only when AngularJS\n         * actually updates the browser URL (window.location).\n         *\n         * @param fn The callback function that is triggered for the listener when the URL changes.\n         * @param err The callback function that is triggered when an error occurs.\n         */\n        $locationShim.prototype.onChange = function (fn, err) {\n            if (err === void 0) { err = function (e) { }; }\n            this.$$changeListeners.push([fn, err]);\n        };\n        /** @internal */\n        $locationShim.prototype.$$notifyChangeListeners = function (url, state, oldUrl, oldState) {\n            if (url === void 0) { url = ''; }\n            if (oldUrl === void 0) { oldUrl = ''; }\n            this.$$changeListeners.forEach(function (_a) {\n                var _b = __read(_a, 2), fn = _b[0], err = _b[1];\n                try {\n                    fn(url, state, oldUrl, oldState);\n                }\n                catch (e) {\n                    err(e);\n                }\n            });\n        };\n        /**\n         * Parses the provided URL, and sets the current URL to the parsed result.\n         *\n         * @param url The URL string.\n         */\n        $locationShim.prototype.$$parse = function (url) {\n            var pathUrl;\n            if (url.startsWith('/')) {\n                pathUrl = url;\n            }\n            else {\n                // Remove protocol & hostname if URL starts with it\n                pathUrl = this.stripBaseUrl(this.getServerBase(), url);\n            }\n            if (typeof pathUrl === 'undefined') {\n                throw new Error(\"Invalid url \\\"\" + url + \"\\\", missing path prefix \\\"\" + this.getServerBase() + \"\\\".\");\n            }\n            this.parseAppUrl(pathUrl);\n            if (!this.$$path) {\n                this.$$path = '/';\n            }\n            this.composeUrls();\n        };\n        /**\n         * Parses the provided URL and its relative URL.\n         *\n         * @param url The full URL string.\n         * @param relHref A URL string relative to the full URL string.\n         */\n        $locationShim.prototype.$$parseLinkUrl = function (url, relHref) {\n            // When relHref is passed, it should be a hash and is handled separately\n            if (relHref && relHref[0] === '#') {\n                this.hash(relHref.slice(1));\n                return true;\n            }\n            var rewrittenUrl;\n            var appUrl = this.stripBaseUrl(this.getServerBase(), url);\n            if (typeof appUrl !== 'undefined') {\n                rewrittenUrl = this.getServerBase() + appUrl;\n            }\n            else if (this.getServerBase() === url + '/') {\n                rewrittenUrl = this.getServerBase();\n            }\n            // Set the URL\n            if (rewrittenUrl) {\n                this.$$parse(rewrittenUrl);\n            }\n            return !!rewrittenUrl;\n        };\n        $locationShim.prototype.setBrowserUrlWithFallback = function (url, replace, state) {\n            var oldUrl = this.url();\n            var oldState = this.$$state;\n            try {\n                this.browserUrl(url, replace, state);\n                // Make sure $location.state() returns referentially identical (not just deeply equal)\n                // state object; this makes possible quick checking if the state changed in the digest\n                // loop. Checking deep equality would be too expensive.\n                this.$$state = this.browserState();\n                this.$$notifyChangeListeners(url, state, oldUrl, oldState);\n            }\n            catch (e) {\n                // Restore old values if pushState fails\n                this.url(oldUrl);\n                this.$$state = oldState;\n                throw e;\n            }\n        };\n        $locationShim.prototype.composeUrls = function () {\n            this.$$url = this.urlCodec.normalize(this.$$path, this.$$search, this.$$hash);\n            this.$$absUrl = this.getServerBase() + this.$$url.substr(1); // remove '/' from front of URL\n            this.updateBrowser = true;\n        };\n        /**\n         * Retrieves the full URL representation with all segments encoded according to\n         * rules specified in\n         * [RFC 3986](http://www.ietf.org/rfc/rfc3986.txt).\n         *\n         *\n         * ```js\n         * // given URL http://example.com/#/some/path?foo=bar&baz=xoxo\n         * let absUrl = $location.absUrl();\n         * // => \"http://example.com/#/some/path?foo=bar&baz=xoxo\"\n         * ```\n         */\n        $locationShim.prototype.absUrl = function () { return this.$$absUrl; };\n        $locationShim.prototype.url = function (url) {\n            if (typeof url === 'string') {\n                if (!url.length) {\n                    url = '/';\n                }\n                var match = PATH_MATCH.exec(url);\n                if (!match)\n                    return this;\n                if (match[1] || url === '')\n                    this.path(this.urlCodec.decodePath(match[1]));\n                if (match[2] || match[1] || url === '')\n                    this.search(match[3] || '');\n                this.hash(match[5] || '');\n                // Chainable method\n                return this;\n            }\n            return this.$$url;\n        };\n        /**\n         * Retrieves the protocol of the current URL.\n         *\n         * ```js\n         * // given URL http://example.com/#/some/path?foo=bar&baz=xoxo\n         * let protocol = $location.protocol();\n         * // => \"http\"\n         * ```\n         */\n        $locationShim.prototype.protocol = function () { return this.$$protocol; };\n        /**\n         * Retrieves the protocol of the current URL.\n         *\n         * In contrast to the non-AngularJS version `location.host` which returns `hostname:port`, this\n         * returns the `hostname` portion only.\n         *\n         *\n         * ```js\n         * // given URL http://example.com/#/some/path?foo=bar&baz=xoxo\n         * let host = $location.host();\n         * // => \"example.com\"\n         *\n         * // given URL http://user:password@example.com:8080/#/some/path?foo=bar&baz=xoxo\n         * host = $location.host();\n         * // => \"example.com\"\n         * host = location.host;\n         * // => \"example.com:8080\"\n         * ```\n         */\n        $locationShim.prototype.host = function () { return this.$$host; };\n        /**\n         * Retrieves the port of the current URL.\n         *\n         * ```js\n         * // given URL http://example.com/#/some/path?foo=bar&baz=xoxo\n         * let port = $location.port();\n         * // => 80\n         * ```\n         */\n        $locationShim.prototype.port = function () { return this.$$port; };\n        $locationShim.prototype.path = function (path) {\n            if (typeof path === 'undefined') {\n                return this.$$path;\n            }\n            // null path converts to empty string. Prepend with \"/\" if needed.\n            path = path !== null ? path.toString() : '';\n            path = path.charAt(0) === '/' ? path : '/' + path;\n            this.$$path = path;\n            this.composeUrls();\n            return this;\n        };\n        $locationShim.prototype.search = function (search, paramValue) {\n            switch (arguments.length) {\n                case 0:\n                    return this.$$search;\n                case 1:\n                    if (typeof search === 'string' || typeof search === 'number') {\n                        this.$$search = this.urlCodec.decodeSearch(search.toString());\n                    }\n                    else if (typeof search === 'object' && search !== null) {\n                        // Copy the object so it's never mutated\n                        search = __assign({}, search);\n                        // remove object undefined or null properties\n                        for (var key in search) {\n                            if (search[key] == null)\n                                delete search[key];\n                        }\n                        this.$$search = search;\n                    }\n                    else {\n                        throw new Error('LocationProvider.search(): First argument must be a string or an object.');\n                    }\n                    break;\n                default:\n                    if (typeof search === 'string') {\n                        var currentSearch = this.search();\n                        if (typeof paramValue === 'undefined' || paramValue === null) {\n                            delete currentSearch[search];\n                            return this.search(currentSearch);\n                        }\n                        else {\n                            currentSearch[search] = paramValue;\n                            return this.search(currentSearch);\n                        }\n                    }\n            }\n            this.composeUrls();\n            return this;\n        };\n        $locationShim.prototype.hash = function (hash) {\n            if (typeof hash === 'undefined') {\n                return this.$$hash;\n            }\n            this.$$hash = hash !== null ? hash.toString() : '';\n            this.composeUrls();\n            return this;\n        };\n        /**\n         * Changes to `$location` during the current `$digest` will replace the current\n         * history record, instead of adding a new one.\n         */\n        $locationShim.prototype.replace = function () {\n            this.$$replace = true;\n            return this;\n        };\n        $locationShim.prototype.state = function (state) {\n            if (typeof state === 'undefined') {\n                return this.$$state;\n            }\n            this.$$state = state;\n            return this;\n        };\n        return $locationShim;\n    }());\n    /**\n     * The factory function used to create an instance of the `$locationShim` in Angular,\n     * and provides an API-compatiable `$locationProvider` for AngularJS.\n     *\n     * @publicApi\n     */\n    var $locationShimProvider = /** @class */ (function () {\n        function $locationShimProvider(ngUpgrade, location, platformLocation, urlCodec, locationStrategy) {\n            this.ngUpgrade = ngUpgrade;\n            this.location = location;\n            this.platformLocation = platformLocation;\n            this.urlCodec = urlCodec;\n            this.locationStrategy = locationStrategy;\n        }\n        /**\n         * Factory method that returns an instance of the $locationShim\n         */\n        $locationShimProvider.prototype.$get = function () {\n            return new $locationShim(this.ngUpgrade.$injector, this.location, this.platformLocation, this.urlCodec, this.locationStrategy);\n        };\n        /**\n         * Stub method used to keep API compatible with AngularJS. This setting is configured through\n         * the LocationUpgradeModule's `config` method in your Angular app.\n         */\n        $locationShimProvider.prototype.hashPrefix = function (prefix) {\n            throw new Error('Configure LocationUpgrade through LocationUpgradeModule.config method.');\n        };\n        /**\n         * Stub method used to keep API compatible with AngularJS. This setting is configured through\n         * the LocationUpgradeModule's `config` method in your Angular app.\n         */\n        $locationShimProvider.prototype.html5Mode = function (mode) {\n            throw new Error('Configure LocationUpgrade through LocationUpgradeModule.config method.');\n        };\n        return $locationShimProvider;\n    }());\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * A codec for encoding and decoding URL parts.\n     *\n     * @publicApi\n     **/\n    var UrlCodec = /** @class */ (function () {\n        function UrlCodec() {\n        }\n        return UrlCodec;\n    }());\n    /**\n     * A `UrlCodec` that uses logic from AngularJS to serialize and parse URLs\n     * and URL parameters.\n     *\n     * @publicApi\n     */\n    var AngularJSUrlCodec = /** @class */ (function () {\n        function AngularJSUrlCodec() {\n        }\n        // https://github.com/angular/angular.js/blob/864c7f0/src/ng/location.js#L15\n        AngularJSUrlCodec.prototype.encodePath = function (path) {\n            var segments = path.split('/');\n            var i = segments.length;\n            while (i--) {\n                // decode forward slashes to prevent them from being double encoded\n                segments[i] = encodeUriSegment(segments[i].replace(/%2F/g, '/'));\n            }\n            path = segments.join('/');\n            return _stripIndexHtml((path && path[0] !== '/' && '/' || '') + path);\n        };\n        // https://github.com/angular/angular.js/blob/864c7f0/src/ng/location.js#L42\n        AngularJSUrlCodec.prototype.encodeSearch = function (search) {\n            if (typeof search === 'string') {\n                search = parseKeyValue(search);\n            }\n            search = toKeyValue(search);\n            return search ? '?' + search : '';\n        };\n        // https://github.com/angular/angular.js/blob/864c7f0/src/ng/location.js#L44\n        AngularJSUrlCodec.prototype.encodeHash = function (hash) {\n            hash = encodeUriSegment(hash);\n            return hash ? '#' + hash : '';\n        };\n        // https://github.com/angular/angular.js/blob/864c7f0/src/ng/location.js#L27\n        AngularJSUrlCodec.prototype.decodePath = function (path, html5Mode) {\n            if (html5Mode === void 0) { html5Mode = true; }\n            var segments = path.split('/');\n            var i = segments.length;\n            while (i--) {\n                segments[i] = decodeURIComponent(segments[i]);\n                if (html5Mode) {\n                    // encode forward slashes to prevent them from being mistaken for path separators\n                    segments[i] = segments[i].replace(/\\//g, '%2F');\n                }\n            }\n            return segments.join('/');\n        };\n        // https://github.com/angular/angular.js/blob/864c7f0/src/ng/location.js#L72\n        AngularJSUrlCodec.prototype.decodeSearch = function (search) { return parseKeyValue(search); };\n        // https://github.com/angular/angular.js/blob/864c7f0/src/ng/location.js#L73\n        AngularJSUrlCodec.prototype.decodeHash = function (hash) {\n            hash = decodeURIComponent(hash);\n            return hash[0] === '#' ? hash.substring(1) : hash;\n        };\n        AngularJSUrlCodec.prototype.normalize = function (pathOrHref, search, hash, baseUrl) {\n            if (arguments.length === 1) {\n                var parsed = this.parse(pathOrHref, baseUrl);\n                if (typeof parsed === 'string') {\n                    return parsed;\n                }\n                var serverUrl = parsed.protocol + \"://\" + parsed.hostname + (parsed.port ? ':' + parsed.port : '');\n                return this.normalize(this.decodePath(parsed.pathname), this.decodeSearch(parsed.search), this.decodeHash(parsed.hash), serverUrl);\n            }\n            else {\n                var encPath = this.encodePath(pathOrHref);\n                var encSearch = search && this.encodeSearch(search) || '';\n                var encHash = hash && this.encodeHash(hash) || '';\n                var joinedPath = (baseUrl || '') + encPath;\n                if (!joinedPath.length || joinedPath[0] !== '/') {\n                    joinedPath = '/' + joinedPath;\n                }\n                return joinedPath + encSearch + encHash;\n            }\n        };\n        AngularJSUrlCodec.prototype.areEqual = function (valA, valB) { return this.normalize(valA) === this.normalize(valB); };\n        // https://github.com/angular/angular.js/blob/864c7f0/src/ng/urlUtils.js#L60\n        AngularJSUrlCodec.prototype.parse = function (url, base) {\n            try {\n                // Safari 12 throws an error when the URL constructor is called with an undefined base.\n                var parsed = !base ? new URL(url) : new URL(url, base);\n                return {\n                    href: parsed.href,\n                    protocol: parsed.protocol ? parsed.protocol.replace(/:$/, '') : '',\n                    host: parsed.host,\n                    search: parsed.search ? parsed.search.replace(/^\\?/, '') : '',\n                    hash: parsed.hash ? parsed.hash.replace(/^#/, '') : '',\n                    hostname: parsed.hostname,\n                    port: parsed.port,\n                    pathname: (parsed.pathname.charAt(0) === '/') ? parsed.pathname : '/' + parsed.pathname\n                };\n            }\n            catch (e) {\n                throw new Error(\"Invalid URL (\" + url + \") with base (\" + base + \")\");\n            }\n        };\n        return AngularJSUrlCodec;\n    }());\n    function _stripIndexHtml(url) {\n        return url.replace(/\\/index.html$/, '');\n    }\n    /**\n     * Tries to decode the URI component without throwing an exception.\n     *\n     * @private\n     * @param str value potential URI component to check.\n     * @returns {boolean} True if `value` can be decoded\n     * with the decodeURIComponent function.\n     */\n    function tryDecodeURIComponent(value) {\n        try {\n            return decodeURIComponent(value);\n        }\n        catch (e) {\n            // Ignore any invalid uri component.\n            return undefined;\n        }\n    }\n    /**\n     * Parses an escaped url query string into key-value pairs. Logic taken from\n     * https://github.com/angular/angular.js/blob/864c7f0/src/Angular.js#L1382\n     * @returns {Object.<string,boolean|Array>}\n     */\n    function parseKeyValue(keyValue) {\n        var obj = {};\n        (keyValue || '').split('&').forEach(function (keyValue) {\n            var splitPoint, key, val;\n            if (keyValue) {\n                key = keyValue = keyValue.replace(/\\+/g, '%20');\n                splitPoint = keyValue.indexOf('=');\n                if (splitPoint !== -1) {\n                    key = keyValue.substring(0, splitPoint);\n                    val = keyValue.substring(splitPoint + 1);\n                }\n                key = tryDecodeURIComponent(key);\n                if (typeof key !== 'undefined') {\n                    val = typeof val !== 'undefined' ? tryDecodeURIComponent(val) : true;\n                    if (!obj.hasOwnProperty(key)) {\n                        obj[key] = val;\n                    }\n                    else if (Array.isArray(obj[key])) {\n                        obj[key].push(val);\n                    }\n                    else {\n                        obj[key] = [obj[key], val];\n                    }\n                }\n            }\n        });\n        return obj;\n    }\n    /**\n     * Serializes into key-value pairs. Logic taken from\n     * https://github.com/angular/angular.js/blob/864c7f0/src/Angular.js#L1409\n     */\n    function toKeyValue(obj) {\n        var parts = [];\n        var _loop_1 = function (key) {\n            var value = obj[key];\n            if (Array.isArray(value)) {\n                value.forEach(function (arrayValue) {\n                    parts.push(encodeUriQuery(key, true) +\n                        (arrayValue === true ? '' : '=' + encodeUriQuery(arrayValue, true)));\n                });\n            }\n            else {\n                parts.push(encodeUriQuery(key, true) +\n                    (value === true ? '' : '=' + encodeUriQuery(value, true)));\n            }\n        };\n        for (var key in obj) {\n            _loop_1(key);\n        }\n        return parts.length ? parts.join('&') : '';\n    }\n    /**\n     * We need our custom method because encodeURIComponent is too aggressive and doesn't follow\n     * http://www.ietf.org/rfc/rfc3986.txt with regards to the character set (pchar) allowed in path\n     * segments:\n     *    segment       = *pchar\n     *    pchar         = unreserved / pct-encoded / sub-delims / \":\" / \"@\"\n     *    pct-encoded   = \"%\" HEXDIG HEXDIG\n     *    unreserved    = ALPHA / DIGIT / \"-\" / \".\" / \"_\" / \"~\"\n     *    sub-delims    = \"!\" / \"$\" / \"&\" / \"'\" / \"(\" / \")\"\n     *                     / \"*\" / \"+\" / \",\" / \";\" / \"=\"\n     *\n     * Logic from https://github.com/angular/angular.js/blob/864c7f0/src/Angular.js#L1437\n     */\n    function encodeUriSegment(val) {\n        return encodeUriQuery(val, true)\n            .replace(/%26/gi, '&')\n            .replace(/%3D/gi, '=')\n            .replace(/%2B/gi, '+');\n    }\n    /**\n     * This method is intended for encoding *key* or *value* parts of query component. We need a custom\n     * method because encodeURIComponent is too aggressive and encodes stuff that doesn't have to be\n     * encoded per http://tools.ietf.org/html/rfc3986:\n     *    query         = *( pchar / \"/\" / \"?\" )\n     *    pchar         = unreserved / pct-encoded / sub-delims / \":\" / \"@\"\n     *    unreserved    = ALPHA / DIGIT / \"-\" / \".\" / \"_\" / \"~\"\n     *    pct-encoded   = \"%\" HEXDIG HEXDIG\n     *    sub-delims    = \"!\" / \"$\" / \"&\" / \"'\" / \"(\" / \")\"\n     *                     / \"*\" / \"+\" / \",\" / \";\" / \"=\"\n     *\n     * Logic from https://github.com/angular/angular.js/blob/864c7f0/src/Angular.js#L1456\n     */\n    function encodeUriQuery(val, pctEncodeSpaces) {\n        if (pctEncodeSpaces === void 0) { pctEncodeSpaces = false; }\n        return encodeURIComponent(val)\n            .replace(/%40/gi, '@')\n            .replace(/%3A/gi, ':')\n            .replace(/%24/g, '$')\n            .replace(/%2C/gi, ',')\n            .replace(/%3B/gi, ';')\n            .replace(/%20/g, (pctEncodeSpaces ? '%20' : '+'));\n    }\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * A provider token used to configure the location upgrade module.\n     *\n     * @publicApi\n     */\n    var LOCATION_UPGRADE_CONFIGURATION = new core.InjectionToken('LOCATION_UPGRADE_CONFIGURATION');\n    var APP_BASE_HREF_RESOLVED = new core.InjectionToken('APP_BASE_HREF_RESOLVED');\n    /**\n     * `NgModule` used for providing and configuring Angular's Unified Location Service for upgrading.\n     *\n     * @see [Using the Unified Angular Location Service](guide/upgrade#using-the-unified-angular-location-service)\n     *\n     * @publicApi\n     */\n    var LocationUpgradeModule = /** @class */ (function () {\n        function LocationUpgradeModule() {\n        }\n        LocationUpgradeModule_1 = LocationUpgradeModule;\n        LocationUpgradeModule.config = function (config) {\n            return {\n                ngModule: LocationUpgradeModule_1,\n                providers: [\n                    common.Location,\n                    {\n                        provide: $locationShim,\n                        useFactory: provide$location,\n                        deps: [_static.UpgradeModule, common.Location, common.PlatformLocation, UrlCodec, common.LocationStrategy]\n                    },\n                    { provide: LOCATION_UPGRADE_CONFIGURATION, useValue: config ? config : {} },\n                    { provide: UrlCodec, useFactory: provideUrlCodec, deps: [LOCATION_UPGRADE_CONFIGURATION] },\n                    {\n                        provide: APP_BASE_HREF_RESOLVED,\n                        useFactory: provideAppBaseHref,\n                        deps: [LOCATION_UPGRADE_CONFIGURATION, [new core.Inject(common.APP_BASE_HREF), new core.Optional()]]\n                    },\n                    {\n                        provide: common.LocationStrategy,\n                        useFactory: provideLocationStrategy,\n                        deps: [\n                            common.PlatformLocation,\n                            APP_BASE_HREF_RESOLVED,\n                            LOCATION_UPGRADE_CONFIGURATION,\n                        ]\n                    },\n                ],\n            };\n        };\n        var LocationUpgradeModule_1;\n        LocationUpgradeModule = LocationUpgradeModule_1 = __decorate([\n            core.NgModule({ imports: [common.CommonModule] })\n        ], LocationUpgradeModule);\n        return LocationUpgradeModule;\n    }());\n    function provideAppBaseHref(config, appBaseHref) {\n        if (config && config.appBaseHref != null) {\n            return config.appBaseHref;\n        }\n        else if (appBaseHref != null) {\n            return appBaseHref;\n        }\n        return '';\n    }\n    function provideUrlCodec(config) {\n        var codec = config && config.urlCodec || AngularJSUrlCodec;\n        return new codec();\n    }\n    function provideLocationStrategy(platformLocation, baseHref, options) {\n        if (options === void 0) { options = {}; }\n        return options.useHash ? new common.HashLocationStrategy(platformLocation, baseHref) :\n            new common.PathLocationStrategy(platformLocation, baseHref);\n    }\n    function provide$location(ngUpgrade, location, platformLocation, urlCodec, locationStrategy) {\n        var $locationProvider = new $locationShimProvider(ngUpgrade, location, platformLocation, urlCodec, locationStrategy);\n        return $locationProvider.$get();\n    }\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    // This file only reexports content of the `src` folder. Keep it that way.\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n\n    /**\n     * Generated bundle index. Do not edit.\n     */\n\n    exports.ɵangular_packages_common_upgrade_upgrade_d = provide$location;\n    exports.ɵangular_packages_common_upgrade_upgrade_a = provideAppBaseHref;\n    exports.ɵangular_packages_common_upgrade_upgrade_c = provideLocationStrategy;\n    exports.ɵangular_packages_common_upgrade_upgrade_b = provideUrlCodec;\n    exports.$locationShim = $locationShim;\n    exports.$locationShimProvider = $locationShimProvider;\n    exports.LOCATION_UPGRADE_CONFIGURATION = LOCATION_UPGRADE_CONFIGURATION;\n    exports.LocationUpgradeModule = LocationUpgradeModule;\n    exports.AngularJSUrlCodec = AngularJSUrlCodec;\n    exports.UrlCodec = UrlCodec;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n//# sourceMappingURL=common-upgrade.umd.js.map\n"]}