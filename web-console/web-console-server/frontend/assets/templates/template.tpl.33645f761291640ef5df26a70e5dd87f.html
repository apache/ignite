<div ng-if="notebook"><div class="notebooks-top"><h1 ng-hide="notebook.edit"><label>{{notebook.name}}</label><div class="btn-group" ng-if="!demo"><i class="btn btn-default fa fa-pencil" ng-click="notebook.edit = true;notebook.editName = notebook.name" bs-tooltip="" data-title="Rename notebook" data-trigger="hover" data-placement="bottom"></i></div></h1><h1 ng-show="notebook.edit"><input class="form-control" ng-model="notebook.editName" required="required" ignite-on-enter="renameNotebook(notebook.editName)" ignite-on-escape="notebook.edit = false;"/><i class="btn fa fa-floppy-o" ng-show="notebook.editName" ng-click="renameNotebook(notebook.editName)" bs-tooltip="::{title: (&quot;queries.notebook.saveNotebookNameButtonTooltip&quot;|translate)}" data-trigger="hover"></i></h1><cluster-selector></cluster-selector><div class="notebook-top-buttons"><a class="dropdown-toggle" style="margin-right: 20px" data-toggle="dropdown" bs-dropdown="scrollParagraphs" data-placement="bottom-left"><span translate="queries.notebook.scrollToQueryButtonLabel"></span><span class="caret"></span></a><button class="btn-ignite btn-ignite--primary" ng-click="addQuery()"><svg class="icon-left" ignite-icon="plus"></svg><span translate="queries.notebook.addQueryButtonLabel"></span></button><button class="btn-ignite btn-ignite--primary" ng-click="addScan()"><svg class="icon-left" ignite-icon="plus"></svg><span translate="queries.notebook.addScanButtonLabel"></span></button></div></div></div><div><breadcrumbs><a class="link-success" ui-sref="base.sql.tabs" translate="queries.notebook.breadcrumbs.parent"></a><span ui-sref="." ui-sref-active="ui-sref-active" translate="queries.notebook.breadcrumbs.here" translate-values="{name: notebook.name}"></span></breadcrumbs><ignite-information data-title="{{::&quot;queries.notebook.features.title&quot;|translate}}" style="margin-bottom: 30px" ng-init="example = &quot;CREATE TABLE Person(ID INTEGER PRIMARY KEY, NAME VARCHAR(100));
INSERT INTO Person(ID, NAME) VALUES (1, 'Ed'), (2, 'Ann'), (3, 'Emma');
SELECT * FROM Person;&quot;"><ul translate="queries.notebook.features.list"></ul><div class="example"><div class="group"><div class="group-legend"><label translate="queries.notebook.features.examplesLabel"></label></div><div class="group-content"><div class="sql-editor" ignite-ace="{                        onLoad: aceInit({}),                        theme: &quot;chrome&quot;,                        mode: &quot;sql&quot;,                        require: [&quot;ace/ext/language_tools&quot;],                        showGutter: false,                        advanced: {                           enableSnippets: false,                           enableBasicAutocompletion: true,                           enableLiveAutocompletion: true                        }}" ng-model="example" readonly="true"></div></div></div></div></ignite-information><div class="notebook-failed--block" ng-if="notebookLoadFailed"><no-data><h2 translate="queries.notebook.noData.title"></h2><label class="col-sm-12" translate="queries.notebook.noData.message"></label></no-data></div><div ng-if="notebook" ignite-loading="sqlLoading" ignite-loading-text="{{ loadingText }}" ignite-loading-position="top"><div class="docs-body paragraphs"><div class="panel-group"><div class="panel-paragraph" ng-repeat="paragraph in notebook.paragraphs" id="{{paragraph.id}}" ng-form="form_{{paragraph.id}}"><panel-collapsible ng-if="paragraph.queryType === &quot;SCAN&quot;" opened="$ctrl.isParagraphOpened($index)" on-close="$ctrl.onParagraphClose($index)" on-open="$ctrl.onParagraphOpen($index)"><panel-title>{{ paragraph.name }}</panel-title><panel-actions><query-actions-button actions="$ctrl.scanActions" item="paragraph"></query-actions-button></panel-actions><panel-content><div class="col-sm-12 sql-controls"><div class="col-sm-3"><div class="form-field form-field__dropdown ignite-form-field" id="{{ &quot;cache&quot; }}Field"><label class="form-field__label {{ undefined ? 'required' : '' }}" id="{{ &quot;cache&quot; }}Label" for="{{ &quot;cache&quot; }}Input"><span>Cache:</span></label><div class="form-field__control"><select id="{{ &quot;cache&quot; }}Input" name="{{ &quot;cache&quot; }}" ng-model="paragraph.cacheName" ng-ref="$input" ng-ref-read="ngModel"><option value="" hidden="hidden" translate="{{::&quot;queries.notebook.scanPanelContent.chooseCacheInput.placeholder&quot;|translate}}"></option><option ng-repeat="item in caches track by item.value" ng-value="item.value" ng-bind="item.label"></option></select></div><div class="form-field__errors" ng-messages="$input.$error" ng-show="($input.$dirty || $input.$touched || $input.$submitted) &amp;&amp; $input.$invalid"></div></div></div><div class="col-sm-3"><div class="form-field form-field__sensitive ignite-form-field"><label class="form-field__label {{ undefined ? 'required' : '' }}" id="{{ &quot;filter&quot; }}Label" for="{{ &quot;filter&quot; }}Input"><span>Filter:</span><svg ignite-icon="info" bs-tooltip="" data-title="You can set case sensitive search" data-placement="auto"></svg></label><div class="form-field__control form-field__control-group"><input id="{{ &quot;filter&quot; }}Input" name="{{ &quot;filter&quot; }}" translate-attr="{placeholder: &quot;{{::&quot;queries.notebook.scanPanelContent.filterInput.placeholder&quot;|translate}}&quot;}" ng-model="paragraph.filter" ng-ref="$input" ng-ref-read="ngModel" type="text"/><label class="btn-ignite btn-ignite--secondary"><input id="{{ &quot;filter&quot; + &quot;Sensitive&quot; }}Input" name="{{ &quot;filter&quot; + &quot;Sensitive&quot; }}" translate-attr="{placeholder: &quot;{{::&quot;queries.notebook.scanPanelContent.filterInput.placeholder&quot;|translate}}&quot;}" ng-model="paragraph.caseSensitive" ng-ref="$input" ng-ref-read="ngModel" type="checkbox"/><span>Cs</span></label></div><div class="form-field__errors" ng-messages="$input.$error" ng-show="($input.$dirty || $input.$touched || $input.$submitted) &amp;&amp; $input.$invalid"></div></div></div><div class="col-sm-3"><div class="form-field form-field__dropdown ignite-form-field" id="{{ &quot;pageSize&quot; + paragraph.id }}Field"><label class="form-field__label {{ undefined ? 'required' : '' }}" id="{{ &quot;pageSize&quot; + paragraph.id }}Label" for="{{ &quot;pageSize&quot; + paragraph.id }}Input"><span>Rows per page:</span><svg ignite-icon="info" bs-tooltip="" data-title="{{::&quot;queries.notebook.scanPanelContent.rowsPerPageInput.tooltip&quot;|translate}}" data-placement="top"></svg></label><div class="form-field__control"><select id="{{ &quot;pageSize&quot; + paragraph.id }}Input" name="{{ &quot;pageSize&quot; + paragraph.id }}" ng-model="paragraph.pageSize" ng-ref="$input" ng-ref-read="ngModel"><option ng-repeat="item in pageSizesOptions track by item.value" ng-value="item.value" ng-bind="item.label"></option></select></div><div class="form-field__errors" ng-messages="$input.$error" ng-show="($input.$dirty || $input.$touched || $input.$submitted) &amp;&amp; $input.$invalid"></div></div></div></div><div class="col-sm-12 sql-controls"><div><button class="btn-ignite btn-ignite--primary" ng-disabled="!scanAvailable(paragraph)" ng-click="scan(paragraph)"><span class="icon-left fa fa-fw fa-play" ng-hide="paragraph.checkScanInProgress(false)"></span><span class="icon-left fa fa-fw fa-refresh fa-spin" ng-show="paragraph.checkScanInProgress(false)"></span><span translate="queries.notebook.scanActions.scan"></span></button><button class="btn-ignite btn-ignite--primary" ng-disabled="!scanAvailable(paragraph)" ng-click="scan(paragraph, true)"><span class="icon-left fa fa-fw fa-play" ng-hide="paragraph.checkScanInProgress(true)"></span><span class="icon-left fa fa-fw fa-refresh fa-spin" ng-show="paragraph.checkScanInProgress(true)"></span><span translate="queries.notebook.scanActions.scanOnSelectedNode"></span></button><button class="btn-ignite btn-ignite--secondary" ng-if="paragraph.checkScanInProgress(false) || paragraph.checkScanInProgress(true)" ng-click="cancelQuery(paragraph)" data-placement="bottom" bs-tooltip="::{title: (&quot;queries.notebook.scanActions.cancelTooltip&quot;|translate)}" translate="queries.notebook.scanActions.cancel"></button></div><div></div></div><div class="col-sm-12 sql-result" ng-if="paragraph.queryExecuted() &amp;&amp; !paragraph.scanningInProgress" ng-switch="paragraph.resultType()"><div class="error" ng-switch-when="error" translate="queries.notebook.queryResult.genericError" translate-values="{error: paragraph.error.message}"></div><div class="empty" ng-switch-when="empty" translate="queries.notebook.queryResult.emptyResult" translate-values="{duration: (paragraph.duration | duration)}"></div><div class="table" ng-switch-when="table"><div class="total row"><div class="col-xs-7"><grid-column-selector grid-api="paragraph.gridOptions.api"><div class="fa fa-bars icon"></div></grid-column-selector><label translate="queries.notebook.queryResultTableHeader.currentPage" translate-values="{page: paragraph.page}"></label><label class="margin-left-dflt" translate="queries.notebook.queryResultTableHeader.resultsSoFar" translate-values="{amount: paragraph.rows.length + paragraph.total}"></label><label class="margin-left-dflt" translate="queries.notebook.queryResultTableHeader.duration" translate-values="{duration: (paragraph.duration | duration)}"></label><label class="margin-left-dflt" ng-show="paragraph.localQueryMode" translate="queries.notebook.queryResultTableHeader.nodeId" translate-values="{duration: (paragraph.resNodeId | id8)}"></label><i class="btn btn-default fa fa-eraser" ng-click="clearResult(paragraph)" bs-tooltip="::{title: (&quot;queries.notebook.queryResultTableHeader.clearQueryResultButtonTooltip&quot;|translate)}" data-trigger="hover" data-placement="bottom"></i></div><div class="col-xs-2"><div ng-if="paragraph.queryType === &quot;SQL_FIELDS&quot;"><div class="btn-group" ng-model="paragraph.result" ng-click="$event.stopPropagation()" style="left: 50%; margin: 0 0 0 -70px;display: block;"><i class="btn btn-default fa fa-table" ng-click="setResult(paragraph, 'TABLE')" ng-class="{active: resultEq(paragraph, 'TABLE')}" bs-tooltip="" data-title="{{::&quot;queries.notebook.chartTooltip.table&quot;|translate}}" data-trigger="hover" data-placement="bottom"></i><i class="btn btn-default fa fa-bar-chart" ng-click="setResult(paragraph, 'BAR')" ng-class="{active: resultEq(paragraph, 'BAR')}" bs-tooltip="" data-title="{{::&quot;queries.notebook.chartTooltip.bar&quot;|translate}}" data-trigger="hover" data-placement="bottom"></i><i class="btn btn-default fa fa-pie-chart" ng-click="setResult(paragraph, 'PIE')" ng-class="{active: resultEq(paragraph, 'PIE')}" bs-tooltip="" data-title="{{::&quot;queries.notebook.chartTooltip.pie&quot;|translate}}" data-trigger="hover" data-placement="bottom"></i><i class="btn btn-default fa fa-line-chart" ng-click="setResult(paragraph, 'LINE')" ng-class="{active: resultEq(paragraph, 'LINE')}" bs-tooltip="" data-title="{{::&quot;queries.notebook.chartTooltip.line&quot;|translate}}" data-trigger="hover" data-placement="bottom"></i><i class="btn btn-default fa fa-area-chart" ng-click="setResult(paragraph, 'AREA')" ng-class="{active: resultEq(paragraph, 'AREA')}" bs-tooltip="" data-title="{{::&quot;queries.notebook.chartTooltip.area&quot;|translate}}" data-trigger="hover" data-placement="bottom"></i></div></div></div><div class="col-xs-3"><div class="pull-right"><div class="btn-group panel-tip-container"><!-- TODO: replace this logic for exporting under one component--><button class="btn btn-primary btn--with-icon" ng-click="exportCsv(paragraph)" ng-disabled="paragraph.loading || paragraph.csvIsPreparing" bs-tooltip="" ng-attr-title="{{ scanTooltip(paragraph) }}" data-trigger="hover" data-placement="bottom"><svg ignite-icon="csv" ng-if="!paragraph.csvIsPreparing"></svg><i class="fa fa-fw fa-refresh fa-spin" ng-if="paragraph.csvIsPreparing"></i><span translate="queries.notebook.export.exportButtonLabel"></span></button><button class="btn dropdown-toggle btn-primary" ng-disabled="paragraph.loading || paragraph.csvIsPreparing" bs-dropdown="::$ctrl.exportActions" data-toggle="dropdown" data-container="body" data-placement="bottom-right" data-html="true"><span class="caret"></span></button></div></div></div></div><div class="grid" ui-grid="paragraph.gridOptions" ui-grid-resize-columns="ui-grid-resize-columns" ui-grid-exporter="ui-grid-exporter" ui-grid-hovering="ui-grid-hovering"></div></div><div class="footer clearfix"><div class="pull-left"><span translate="queries.notebook.queryResult.scanQueryCache" translate-values="{cacheName: (paragraph.queryArgs.cacheName | defaultName)}"></span><span ng-if="paragraph.queryArgs.filter" translate="queries.notebook.queryResult.scanQueryFilter" translate-values="{filter: (paragraph.queryArgs.filter)}"></span><span ng-if="paragraph.queryArgs.localNid" translate="queries.notebook.queryResult.scanQueryNode" translate-values="{node: (paragraph.queryArgs.localNid | limitTo:8)}"></span></div><div class="pull-right" ng-show="paragraph.resultType() != &quot;error&quot; &amp;&amp; !paragraph.loading &amp;&amp; paragraph.queryId &amp;&amp; paragraph.nonRefresh() &amp;&amp; (paragraph.table() || paragraph.chart() &amp;&amp; !paragraph.scanExplain())" ng-class="{disabled: paragraph.loading}" ng-click="!paragraph.loading &amp;&amp; nextPage(paragraph)"><i class="fa fa-chevron-circle-right"></i><a translate="queries.notebook.queryResult.nextButtonLabel"></a></div></div></div></panel-content></panel-collapsible><panel-collapsible ng-if="paragraph.queryType === &quot;SQL_FIELDS&quot;" opened="$ctrl.isParagraphOpened($index)" on-close="$ctrl.onParagraphClose($index)" on-open="$ctrl.onParagraphOpen($index)"><panel-title>{{ paragraph.name }}</panel-title><panel-actions><query-actions-button actions="$ctrl.queryActions" item="paragraph"></query-actions-button></panel-actions><panel-content><div class="col-sm-12"><div class="col-xs-8 col-sm-9" style="border-right: 1px solid #eee"><div class="sql-editor" ignite-ace="{onLoad: aceInit(paragraph), theme: &quot;chrome&quot;, mode: &quot;sql&quot;, require: [&quot;ace/ext/language_tools&quot;],advanced: {enableSnippets: false, enableBasicAutocompletion: true, enableLiveAutocompletion: true}}" ng-model="paragraph.query" on-selection-change="paragraph.partialQuery = $event"></div></div><div class="col-xs-4 col-sm-3"><div ng-show="caches.length &gt; 0" style="padding: 5px 10px" st-table="displayedCaches" st-safe-src="caches"><lable class="labelField labelFormField" translate="queries.notebook.queryResult.cachesMetadataInput.label"></lable><i class="fa fa-database tipField" translate-attr="::{title: &quot;queries.notebook.queryResult.cachesMetadataInput.metadataButtonTooltip&quot;}" bs-popover="bs-popover" data-template-url="{{ $ctrl.cacheMetadataTemplateUrl }}" data-placement="bottom-right" data-trigger="click" data-container="#{{ paragraph.id }}"></i><div class="input-tip"><input class="form-control" type="text" st-search="label" translate-attr="::{placeholder: &quot;queries.notebook.queryResult.cachesMetadataInput.filterPlaceholder&quot;}"/></div><div class="queries-notebook-displayed-caches"><div ng-repeat="cache in displayedCaches track by cache.value"><div class="form-field form-field__radio"><label class="form-field__label {{ undefined ? 'required' : '' }}" id="{{ &quot;cache_&quot; + [paragraph.id, $index].join(&quot;_&quot;) }}Label" for="{{ &quot;cache_&quot; + [paragraph.id, $index].join(&quot;_&quot;) }}cache.valueInput"><span>{{ cache.label }}</span></label><div class="form-field__control"><input id="{{ &quot;cache_&quot; + [paragraph.id, $index].join(&quot;_&quot;) }}cache.valueInput" name="{{ &quot;cache_&quot; + [paragraph.id, $index].join(&quot;_&quot;) }}" translate-attr="{placeholder: &quot;undefined&quot;}" ng-model="paragraph.cacheName" ng-ref="$input" ng-ref-read="ngModel" type="radio" ng-value="cache.value"/></div><div class="form-field__errors" ng-messages="$input.$error" ng-show="($input.$dirty || $input.$touched || $input.$submitted) &amp;&amp; $input.$invalid"></div></div></div></div><div class="empty-caches" ng-show="displayedCaches.length == 0 &amp;&amp; caches.length != 0"><no-data><label translate="queries.notebook.queryResult.wrongCachesFilterError"></label></no-data></div><div class="settings-row"><div class="row" ng-if="displayedCaches.length &gt; 0 &amp;&amp; ddlAvailable(paragraph)"><div class="form-field ignite-form-field form-field__checkbox" id="{{ &quot;useAsDefaultSchema&quot; + paragraph.id }}Field"><label class="form-field__label {{ undefined ? 'required' : '' }}" id="{{ &quot;useAsDefaultSchema&quot; + paragraph.id }}Label" for="{{ &quot;useAsDefaultSchema&quot; + paragraph.id }}Input"><span>{{::"queries.notebook.queryResult.useAsDefaultSchemaInput.label"|translate}}</span><svg ignite-icon="info" bs-tooltip="" data-title="{{::&quot;queries.notebook.queryResult.useAsDefaultSchemaInput.tooltip&quot;|translate}}" data-placement="top"></svg></label><div class="form-field__control"><input id="{{ &quot;useAsDefaultSchema&quot; + paragraph.id }}Input" name="{{ &quot;useAsDefaultSchema&quot; + paragraph.id }}" translate-attr="{placeholder: &quot;undefined&quot;}" ng-model="paragraph.useAsDefaultSchema" ng-ref="$input" ng-ref-read="ngModel" type="checkbox"/></div><div class="form-field__errors" ng-messages="$input.$error" ng-show="($input.$dirty || $input.$touched || $input.$submitted) &amp;&amp; $input.$invalid"></div></div></div></div></div><div class="empty-caches" ng-show="caches.length == 0"><no-data handle-cluster-inactive="true"><label translate="queries.notebook.queryResult.noCaches"></label></no-data></div></div></div><div class="col-sm-12 sql-controls"><div><button class="btn-ignite btn-ignite--primary" ng-disabled="!queryAvailable(paragraph)" ng-click="execute(paragraph)"><span class="icon-left fa fa-fw fa-play" ng-hide="paragraph.executionInProgress(false)"></span><span class="icon-left fa fa-fw fa-refresh fa-spin" ng-show="paragraph.executionInProgress(false)"></span><span translate="queries.notebook.queryActions.execute.buttonLabel"></span></button><button class="btn-ignite btn-ignite--primary" ng-disabled="!queryAvailable(paragraph)" ng-click="execute(paragraph, true)"><span class="icon-left fa fa-fw fa-play" ng-hide="paragraph.executionInProgress(true)"></span><span class="icon-left fa fa-fw fa-refresh fa-spin" ng-show="paragraph.executionInProgress(true)"></span><span translate="queries.notebook.queryActions.executeOnSelectedNode.buttonLabel"></span></button><button class="btn-ignite btn-ignite--secondary" ng-disabled="!queryAvailable(paragraph)" ng-click="explain(paragraph)" data-placement="bottom" bs-tooltip="{title: queryTooltip(paragraph, (&quot;queries.notebook.queryActions.explain.tooltip&quot;|translate))}"><span translate="queries.notebook.queryActions.explain.buttonLabel"></span></button><button class="btn-ignite btn-ignite--secondary" ng-if="paragraph.executionInProgress(false) || paragraph.executionInProgress(true)" ng-click="cancelQuery(paragraph)" data-placement="bottom" bs-tooltip="::{title: (&quot;queries.notebook.queryActions.cancel.tooltip&quot;|translate)}"><span translate="queries.notebook.queryActions.cancel.buttonLabel"></span></button></div><div><div class="form-field--inline" bs-tooltip="::{title: (&quot;queries.notebook.querySettings.rowsPerPageInput.tooltip&quot;|translate)}" data-placement="top"><div class="form-field form-field__dropdown ignite-form-field" id="{{ &quot;pageSize&quot; + paragraph.id }}Field"><label class="form-field__label {{ undefined ? 'required' : '' }}" id="{{ &quot;pageSize&quot; + paragraph.id }}Label" for="{{ &quot;pageSize&quot; + paragraph.id }}Input"><span>Rows per page:</span></label><div class="form-field__control"><button class="select-toggle" type="button" id="{{ &quot;pageSize&quot; + paragraph.id }}Input" name="{{ &quot;pageSize&quot; + paragraph.id }}" ng-model="paragraph.pageSize" ng-ref="$input" ng-ref-read="ngModel" bs-select="bs-select" bs-options="item.value as item.label for item in pageSizesOptions" tabindex="0"></button></div><div class="form-field__errors" ng-messages="$input.$error" ng-show="($input.$dirty || $input.$touched || $input.$submitted) &amp;&amp; $input.$invalid"></div></div></div><div class="form-field--inline" bs-tooltip="::{title: (&quot;queries.notebook.querySettings.maxPagesInput.tooltip&quot;|translate)}" data-placement="top"><div class="form-field form-field__dropdown ignite-form-field" id="{{ &quot;maxPages&quot; + paragraph.id }}Field"><label class="form-field__label {{ undefined ? 'required' : '' }}" id="{{ &quot;maxPages&quot; + paragraph.id }}Label" for="{{ &quot;maxPages&quot; + paragraph.id }}Input"><span>Max pages:</span></label><div class="form-field__control"><button class="select-toggle" type="button" id="{{ &quot;maxPages&quot; + paragraph.id }}Input" name="{{ &quot;maxPages&quot; + paragraph.id }}" ng-model="paragraph.maxPages" ng-ref="$input" ng-ref-read="ngModel" bs-select="bs-select" bs-options="item.value as item.label for item in maxPages" tabindex="0"></button></div><div class="form-field__errors" ng-messages="$input.$error" ng-show="($input.$dirty || $input.$touched || $input.$submitted) &amp;&amp; $input.$invalid"></div></div></div><div class="form-field--inline" bs-tooltip="::{title: (&quot;queries.notebook.querySettings.refreshRateInput.tooltip&quot;|translate)}" data-placement="bottom"><button class="btn-ignite-group" bs-popover="bs-popover" data-template-url="{{ $ctrl.paragraphRateTemplateUrl }}" data-placement="bottom-right" data-trigger="click"><div class="btn-ignite" ng-class="{                        &quot;btn-ignite--primary&quot;: paragraph.rate &amp;&amp; paragraph.rate.installed,                        &quot;btn-ignite--secondary&quot;: !(paragraph.rate &amp;&amp; paragraph.rate.installed),                    }"><svg ignite-icon="clock"></svg>&nbsp; {{ rateAsString(paragraph) }}</div><div class="btn-ignite" ng-class="{                        &quot;btn-ignite--primary&quot;: paragraph.rate &amp;&amp; paragraph.rate.installed,                        &quot;btn-ignite--secondary&quot;: !(paragraph.rate &amp;&amp; paragraph.rate.installed),                    }"><span class="icon fa fa-caret-down"></span></div></button></div></div><div><div class="row" ng-if="nonCollocatedJoinsAvailable(paragraph)"><div class="form-field ignite-form-field form-field__checkbox" id="{{ &quot;nonCollocatedJoins&quot; + paragraph.id }}Field"><label class="form-field__label {{ undefined ? 'required' : '' }}" id="{{ &quot;nonCollocatedJoins&quot; + paragraph.id }}Label" for="{{ &quot;nonCollocatedJoins&quot; + paragraph.id }}Input"><span>Allow non-collocated joins</span><svg ignite-icon="info" bs-tooltip="" data-title="{{::&quot;queries.notebook.querySettings.nonCollocatedJoinsInput.tooltip&quot;|translate}}" data-placement="top"></svg></label><div class="form-field__control"><input id="{{ &quot;nonCollocatedJoins&quot; + paragraph.id }}Input" name="{{ &quot;nonCollocatedJoins&quot; + paragraph.id }}" translate-attr="{placeholder: &quot;undefined&quot;}" ng-model="paragraph.nonCollocatedJoins" ng-ref="$input" ng-ref-read="ngModel" type="checkbox"/></div><div class="form-field__errors" ng-messages="$input.$error" ng-show="($input.$dirty || $input.$touched || $input.$submitted) &amp;&amp; $input.$invalid"></div></div></div><div class="row" ng-if="collocatedJoinsAvailable(paragraph)"><div class="form-field ignite-form-field form-field__checkbox" id="{{ &quot;collocated&quot; + paragraph.id }}Field"><label class="form-field__label {{ undefined ? 'required' : '' }}" id="{{ &quot;collocated&quot; + paragraph.id }}Label" for="{{ &quot;collocated&quot; + paragraph.id }}Input"><span>Collocated Query</span><svg ignite-icon="info" bs-tooltip="" data-title="{{::&quot;queries.notebook.querySettings.collocatedQueryInput.tooltip&quot;|translate}}" data-placement="top"></svg></label><div class="form-field__control"><input id="{{ &quot;collocated&quot; + paragraph.id }}Input" name="{{ &quot;collocated&quot; + paragraph.id }}" translate-attr="{placeholder: &quot;undefined&quot;}" ng-model="paragraph.collocated" ng-ref="$input" ng-ref-read="ngModel" type="checkbox"/></div><div class="form-field__errors" ng-messages="$input.$error" ng-show="($input.$dirty || $input.$touched || $input.$submitted) &amp;&amp; $input.$invalid"></div></div></div><div class="row" ng-if="enforceJoinOrderAvailable(paragraph)"><div class="form-field ignite-form-field form-field__checkbox" id="{{ &quot;enforceJoinOrder&quot; + paragraph.id }}Field"><label class="form-field__label {{ undefined ? 'required' : '' }}" id="{{ &quot;enforceJoinOrder&quot; + paragraph.id }}Label" for="{{ &quot;enforceJoinOrder&quot; + paragraph.id }}Input"><span>Enforce join order</span><svg ignite-icon="info" bs-tooltip="" data-title="{{::&quot;queries.notebook.querySettings.enforceJoinOrderInput.tooltip&quot;|translate}}" data-placement="top"></svg></label><div class="form-field__control"><input id="{{ &quot;enforceJoinOrder&quot; + paragraph.id }}Input" name="{{ &quot;enforceJoinOrder&quot; + paragraph.id }}" translate-attr="{placeholder: &quot;undefined&quot;}" ng-model="paragraph.enforceJoinOrder" ng-ref="$input" ng-ref-read="ngModel" type="checkbox"/></div><div class="form-field__errors" ng-messages="$input.$error" ng-show="($input.$dirty || $input.$touched || $input.$submitted) &amp;&amp; $input.$invalid"></div></div></div><div class="row" ng-if="lazyQueryAvailable(paragraph)"><div class="form-field ignite-form-field form-field__checkbox" id="{{ &quot;lazy&quot; + paragraph.id }}Field"><label class="form-field__label {{ undefined ? 'required' : '' }}" id="{{ &quot;lazy&quot; + paragraph.id }}Label" for="{{ &quot;lazy&quot; + paragraph.id }}Input"><span>Lazy result set</span><svg ignite-icon="info" bs-tooltip="" data-title="{{::&quot;queries.notebook.querySettings.lazyResultSetInput.tooltip&quot;|translate}}" data-placement="top"></svg></label><div class="form-field__control"><input id="{{ &quot;lazy&quot; + paragraph.id }}Input" name="{{ &quot;lazy&quot; + paragraph.id }}" translate-attr="{placeholder: &quot;undefined&quot;}" ng-model="paragraph.lazy" ng-ref="$input" ng-ref-read="ngModel" type="checkbox"/></div><div class="form-field__errors" ng-messages="$input.$error" ng-show="($input.$dirty || $input.$touched || $input.$submitted) &amp;&amp; $input.$invalid"></div></div></div></div></div><div class="col-sm-12 sql-result" ng-if="paragraph.queryExecuted()" ng-switch="paragraph.resultType()"><div class="error" ng-switch-when="error"><label translate="queries.notebook.queryResult.genericError" translate-values="{error: paragraph.error.message}"></label><br/><a ng-show="paragraph.resultType() === &quot;error&quot;" ng-click="showStackTrace(paragraph)" translate="queries.notebook.queryResult.showMoreButtonLabel"></a></div><div class="empty" ng-switch-when="empty" translate="queries.notebook.queryResult.emptyResult" translate-values="{duration: (paragraph.duration | duration)}"></div><div class="table" ng-switch-when="table"><div class="total row"><div class="col-xs-7"><grid-column-selector grid-api="paragraph.gridOptions.api"><div class="fa fa-bars icon"></div></grid-column-selector><label translate="queries.notebook.queryResultTableHeader.currentPage" translate-values="{page: paragraph.page}"></label><label class="margin-left-dflt" translate="queries.notebook.queryResultTableHeader.resultsSoFar" translate-values="{amount: paragraph.rows.length + paragraph.total}"></label><label class="margin-left-dflt" translate="queries.notebook.queryResultTableHeader.duration" translate-values="{duration: (paragraph.duration | duration)}"></label><label class="margin-left-dflt" ng-show="paragraph.localQueryMode" translate="queries.notebook.queryResultTableHeader.nodeId" translate-values="{duration: (paragraph.resNodeId | id8)}"></label><i class="btn btn-default fa fa-eraser" ng-click="clearResult(paragraph)" bs-tooltip="::{title: (&quot;queries.notebook.queryResultTableHeader.clearQueryResultButtonTooltip&quot;|translate)}" data-trigger="hover" data-placement="bottom"></i></div><div class="col-xs-2"><div ng-if="paragraph.queryType === &quot;SQL_FIELDS&quot;"><div class="btn-group" ng-model="paragraph.result" ng-click="$event.stopPropagation()" style="left: 50%; margin: 0 0 0 -70px;display: block;"><i class="btn btn-default fa fa-table" ng-click="setResult(paragraph, 'TABLE')" ng-class="{active: resultEq(paragraph, 'TABLE')}" bs-tooltip="" data-title="{{::&quot;queries.notebook.chartTooltip.table&quot;|translate}}" data-trigger="hover" data-placement="bottom"></i><i class="btn btn-default fa fa-bar-chart" ng-click="setResult(paragraph, 'BAR')" ng-class="{active: resultEq(paragraph, 'BAR')}" bs-tooltip="" data-title="{{::&quot;queries.notebook.chartTooltip.bar&quot;|translate}}" data-trigger="hover" data-placement="bottom"></i><i class="btn btn-default fa fa-pie-chart" ng-click="setResult(paragraph, 'PIE')" ng-class="{active: resultEq(paragraph, 'PIE')}" bs-tooltip="" data-title="{{::&quot;queries.notebook.chartTooltip.pie&quot;|translate}}" data-trigger="hover" data-placement="bottom"></i><i class="btn btn-default fa fa-line-chart" ng-click="setResult(paragraph, 'LINE')" ng-class="{active: resultEq(paragraph, 'LINE')}" bs-tooltip="" data-title="{{::&quot;queries.notebook.chartTooltip.line&quot;|translate}}" data-trigger="hover" data-placement="bottom"></i><i class="btn btn-default fa fa-area-chart" ng-click="setResult(paragraph, 'AREA')" ng-class="{active: resultEq(paragraph, 'AREA')}" bs-tooltip="" data-title="{{::&quot;queries.notebook.chartTooltip.area&quot;|translate}}" data-trigger="hover" data-placement="bottom"></i></div></div></div><div class="col-xs-3"><div class="pull-right"><div class="btn-ignite-group"><button class="btn-ignite btn-ignite--primary" ng-click="exportCsv(paragraph)" ng-disabled="paragraph.loading" bs-tooltip="{title: queryTooltip(paragraph, (&quot;queries.notebook.queryResultTableHeader.exportButtonTooltip&quot;|translate))}" data-trigger="hover" data-placement="bottom"><svg ignite-icon="csv" ng-if="!paragraph.csvIsPreparing"></svg><svg class="fa-spin" ignite-icon="refresh" ng-if="paragraph.csvIsPreparing"></svg> &nbsp;<span translate="queries.notebook.export.exportButtonLabel"></span></button><button class="btn-ignite btn-ignite--primary" ng-disabled="paragraph.loading" bs-dropdown="::$ctrl.exportActions" data-toggle="dropdown" data-container="body" data-placement="bottom-right" data-html="true"><span class="icon fa fa-caret-down"></span></button></div></div></div></div><div class="grid" ui-grid="paragraph.gridOptions" ui-grid-resize-columns="ui-grid-resize-columns" ui-grid-exporter="ui-grid-exporter" ui-grid-hovering="ui-grid-hovering"></div></div><div class="chart" ng-switch-when="chart"><div ng-hide="paragraph.scanExplain()"><div class="total row"><div class="col-xs-7"><div class="chart-settings-link" ng-show="paragraph.chart &amp;&amp; paragraph.chartColumns.length &gt; 0"><a translate-attr="::{title: &quot;queries.notebook.chartSettings.tooltip&quot;}" ng-click="$event.stopPropagation()" bs-popover="bs-popover" data-template-url="{{ $ctrl.chartSettingsTemplateUrl }}" data-placement="bottom" data-auto-close="1" data-trigger="click"><i class="fa fa-bars"></i><span translate="queries.notebook.chartSettings.buttonLabel"></span></a><div ng-show="paragraphTimeSpanVisible(paragraph)"><label translate="queries.notebook.chartSettings.timeSpanPrefix"></label><button class="select-manual-caret btn btn-default" ng-model="paragraph.timeLineSpan" ng-change="applyChartSettings(paragraph)" bs-options="item for item in timeLineSpans" bs-select="bs-select" data-caret-html="&lt;span class=&quot;caret&quot;&gt;&lt;/span&gt;"></button><label translate="queries.notebook.chartSettings.timeSpanSuffix"></label></div><div><label translate="queries.notebook.chartSettings.durationLabel" translate-values="{duration: (paragraph.duration | duration)}"></label><label class="margin-left-dflt" ng-show="paragraph.localQueryMode" translate="queries.notebook.chartSettings.nodeId8Label" translate-values="{id: (paragraph.resNodeId | id8)}"></label><i class="btn btn-default fa fa-eraser" ng-click="clearResult(paragraph)" bs-tooltip="" translate-attr="::{title: &quot;queries.notebook.chartSettings.clearQueryResultButtonTooltip&quot;}" data-trigger="hover" data-placement="bottom"></i></div></div></div><div class="col-xs-2"><div class="btn-group" ng-model="paragraph.result" ng-click="$event.stopPropagation()" style="left: 50%; margin: 0 0 0 -70px;display: block;"><i class="btn btn-default fa fa-table" ng-click="setResult(paragraph, 'TABLE')" ng-class="{active: resultEq(paragraph, 'TABLE')}" bs-tooltip="" data-title="{{::&quot;queries.notebook.chartTooltip.table&quot;|translate}}" data-trigger="hover" data-placement="bottom"></i><i class="btn btn-default fa fa-bar-chart" ng-click="setResult(paragraph, 'BAR')" ng-class="{active: resultEq(paragraph, 'BAR')}" bs-tooltip="" data-title="{{::&quot;queries.notebook.chartTooltip.bar&quot;|translate}}" data-trigger="hover" data-placement="bottom"></i><i class="btn btn-default fa fa-pie-chart" ng-click="setResult(paragraph, 'PIE')" ng-class="{active: resultEq(paragraph, 'PIE')}" bs-tooltip="" data-title="{{::&quot;queries.notebook.chartTooltip.pie&quot;|translate}}" data-trigger="hover" data-placement="bottom"></i><i class="btn btn-default fa fa-line-chart" ng-click="setResult(paragraph, 'LINE')" ng-class="{active: resultEq(paragraph, 'LINE')}" bs-tooltip="" data-title="{{::&quot;queries.notebook.chartTooltip.line&quot;|translate}}" data-trigger="hover" data-placement="bottom"></i><i class="btn btn-default fa fa-area-chart" ng-click="setResult(paragraph, 'AREA')" ng-class="{active: resultEq(paragraph, 'AREA')}" bs-tooltip="" data-title="{{::&quot;queries.notebook.chartTooltip.area&quot;|translate}}" data-trigger="hover" data-placement="bottom"></i></div></div></div><div class="empty" ng-show="paragraph.chartColumns.length &gt; 0 &amp;&amp; !paragraph.chartColumnsConfigured()" translate="queries.notebook.chartResult.columnsNotConfiguredErrorMessage"></div><div class="empty" ng-show="paragraph.chartColumns.length == 0" translate="queries.notebook.chartResult.noColumnsErrorMessage"> </div><div ng-show="paragraph.chartColumnsConfigured()"><div ng-show="paragraph.timeLineSupported() || !paragraph.chartTimeLineEnabled()"><div ng-repeat="chart in paragraph.charts"><nvd3 options="chart.options" data="chart.data" api="chart.api"></nvd3></div></div><div class="empty" ng-show="!paragraph.timeLineSupported() &amp;&amp; paragraph.chartTimeLineEnabled()" translate="queries.notebook.chartResult.pieChartNoSupportForTimeLineErrorMessage"> </div></div></div><div class="empty" ng-show="paragraph.scanExplain()"><div class="row"><div class="col-xs-4 col-xs-offset-4"><div class="btn-group" ng-model="paragraph.result" ng-click="$event.stopPropagation()" style="left: 50%; margin: 0 0 0 -70px;display: block;"><i class="btn btn-default fa fa-table" ng-click="setResult(paragraph, 'TABLE')" ng-class="{active: resultEq(paragraph, 'TABLE')}" bs-tooltip="" data-title="{{::&quot;queries.notebook.chartTooltip.table&quot;|translate}}" data-trigger="hover" data-placement="bottom"></i><i class="btn btn-default fa fa-bar-chart" ng-click="setResult(paragraph, 'BAR')" ng-class="{active: resultEq(paragraph, 'BAR')}" bs-tooltip="" data-title="{{::&quot;queries.notebook.chartTooltip.bar&quot;|translate}}" data-trigger="hover" data-placement="bottom"></i><i class="btn btn-default fa fa-pie-chart" ng-click="setResult(paragraph, 'PIE')" ng-class="{active: resultEq(paragraph, 'PIE')}" bs-tooltip="" data-title="{{::&quot;queries.notebook.chartTooltip.pie&quot;|translate}}" data-trigger="hover" data-placement="bottom"></i><i class="btn btn-default fa fa-line-chart" ng-click="setResult(paragraph, 'LINE')" ng-class="{active: resultEq(paragraph, 'LINE')}" bs-tooltip="" data-title="{{::&quot;queries.notebook.chartTooltip.line&quot;|translate}}" data-trigger="hover" data-placement="bottom"></i><i class="btn btn-default fa fa-area-chart" ng-click="setResult(paragraph, 'AREA')" ng-class="{active: resultEq(paragraph, 'AREA')}" bs-tooltip="" data-title="{{::&quot;queries.notebook.chartTooltip.area&quot;|translate}}" data-trigger="hover" data-placement="bottom"></i></div></div></div><label class="margin-top-dflt" translate="queries.notebook.chartResult.noQueryAndScanSupportErrorMessage"></label></div></div><div class="footer clearfix" ng-show="paragraph.resultType() !== &quot;error&quot;"><a class="pull-left" ng-click="showResultQuery(paragraph)" translate="queries.notebook.queryResult.showQueryButtonLabel"></a><div class="pull-right" ng-show="paragraph.resultType() !== &quot;error&quot; &amp;&amp; !paragraph.loading &amp;&amp; paragraph.queryId &amp;&amp; paragraph.nonRefresh() &amp;&amp; (paragraph.table() || paragraph.chart() &amp;&amp; !paragraph.scanExplain())" ng-class="{disabled: paragraph.loading}" ng-click="!paragraph.loading &amp;&amp; nextPage(paragraph)"><i class="fa fa-chevron-circle-right"></i><a translate="queries.notebook.queryResult.nextButtonLabel"></a></div></div></div></panel-content></panel-collapsible></div></div></div></div></div>