<?xml version="1.0" encoding="UTF-8"?>

<!--
  ~  Licensed to the Apache Software Foundation (ASF) under one or more
  ~  contributor license agreements.  See the NOTICE file distributed with
  ~  this work for additional information regarding copyright ownership.
  ~  The ASF licenses this file to You under the Apache License, Version 2.0
  ~  (the "License"); you may not use this file except in compliance with
  ~  the License.  You may obtain a copy of the License at
  ~
  ~       http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~  Unless required by applicable law or agreed to in writing, software
  ~  distributed under the License is distributed on an "AS IS" BASIS,
  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~  See the License for the specific language governing permissions and
  ~  limitations under the License.
  -->

<!--
    Ignite Spring configuration file to startup grid.
-->
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">
    <bean id="grid.cfg" class="org.apache.ignite.configuration.IgniteConfiguration">
        <property name="gridLogger">
            <bean class="org.apache.ignite.logger.log4j.Log4JLogger">
                <constructor-arg type="java.lang.String" value="config/ignite-log4j.xml"/>
            </bean>
        </property>

        <property name="discoverySpi">
            <bean class="org.apache.ignite.spi.discovery.tcp.TcpDiscoverySpi">
                <property name="ipFinder">
                    <bean class="org.apache.ignite.spi.discovery.tcp.ipfinder.multicast.TcpDiscoveryMulticastIpFinder">
                        <property name="addresses">
                            <list>
                                <value>10.20.0.219:47500..47509</value>
                                <value>10.20.0.221:47500..47509</value>
                                <value>10.20.0.222:47500..47509</value>
                                <value>10.20.0.223:47500..47509</value>
                            </list>
                        </property>
                    </bean>
                </property>
            </bean>
        </property>

        <property name="cacheConfiguration">
            <list>
                <bean class="org.apache.ignite.configuration.CacheConfiguration">
                    <property name="name" value="rebalance1"/>

                    <property name="cacheMode" value="PARTITIONED"/>

                    <property name="atomicityMode" value="ATOMIC"/>

                    <property name="swapEnabled" value="false"/>

                    <property name="backups" value="1"/>

                    <property name="rebalanceBatchesCount" value="1"/>
                </bean>

                <bean class="org.apache.ignite.configuration.CacheConfiguration">
                    <property name="name" value="rebalance2"/>

                    <property name="cacheMode" value="PARTITIONED"/>

                    <property name="atomicityMode" value="ATOMIC"/>

                    <property name="swapEnabled" value="false"/>

                    <property name="backups" value="1"/>

                    <property name="rebalanceBatchesCount" value="2"/>
                </bean>

                <bean class="org.apache.ignite.configuration.CacheConfiguration">
                    <property name="name" value="rebalance3"/>

                    <property name="cacheMode" value="PARTITIONED"/>

                    <property name="atomicityMode" value="ATOMIC"/>

                    <property name="swapEnabled" value="false"/>

                    <property name="backups" value="1"/>

                    <property name="rebalanceBatchesCount" value="3"/>
                </bean>

                <bean class="org.apache.ignite.configuration.CacheConfiguration">
                    <property name="name" value="rebalance5"/>

                    <property name="cacheMode" value="PARTITIONED"/>

                    <property name="atomicityMode" value="ATOMIC"/>

                    <property name="swapEnabled" value="false"/>

                    <property name="backups" value="1"/>

                    <property name="rebalanceBatchesCount" value="5"/>
                </bean>

                <bean class="org.apache.ignite.configuration.CacheConfiguration">
                    <property name="name" value="rebalance3-1024"/>

                    <property name="cacheMode" value="PARTITIONED"/>

                    <property name="atomicityMode" value="ATOMIC"/>

                    <property name="swapEnabled" value="false"/>

                    <property name="backups" value="1"/>

                    <property name="rebalanceBatchesCount" value="3"/>

                    <property name="rebalanceBatchSize" value="1024"/>
                </bean>

                <bean class="org.apache.ignite.configuration.CacheConfiguration">
                    <property name="name" value="rebalance3-10024"/>

                    <property name="cacheMode" value="PARTITIONED"/>

                    <property name="atomicityMode" value="ATOMIC"/>

                    <property name="swapEnabled" value="false"/>

                    <property name="backups" value="1"/>

                    <property name="rebalanceBatchesCount" value="3"/>

                    <property name="rebalanceBatchSize" value="10024"/>
                </bean>

                <bean class="org.apache.ignite.configuration.CacheConfiguration">
                    <property name="name" value="rebalance3-100024"/>

                    <property name="cacheMode" value="PARTITIONED"/>

                    <property name="atomicityMode" value="ATOMIC"/>

                    <property name="swapEnabled" value="false"/>

                    <property name="backups" value="1"/>

                    <property name="rebalanceBatchesCount" value="3"/>

                    <property name="rebalanceBatchSize" value="100024"/>
                </bean>

            </list>
        </property>

        <property name="failureDetectionTimeout" value="200"/>

        <property name="metricsLogFrequency" value="5000"/>

        <property name="warmupClosure" ref="warmupClosure"/>

        <property name="rebalanceThreadPoolSize" value="0"/>
    </bean>

    <bean id="warmupClosure" class="org.apache.ignite.startup.BasicWarmupClosure">

    </bean>
</beans>
