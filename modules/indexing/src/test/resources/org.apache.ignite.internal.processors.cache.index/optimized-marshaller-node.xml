<?xml version="1.0" encoding="UTF-8"?>

<!--
    Copyright (C) GridGain Systems. All Rights Reserved.
    _________        _____ __________________        _____
    __  ____/___________(_)______  /__  ____/______ ____(_)_______
    _  / __  __  ___/__  / _  __  / _  / __  _  __ `/__  / __  __ \
    / /_/ /  _  /    _  /  / /_/ /  / /_/ /  / /_/ / _  /  _  / / /
    \____/   /_/     /_/   \_,__/   \____/   \__,_/  /_/   /_/ /_/
-->

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

    <import resource="tester-ignite-igfs.xml"/>
    <import resource="tester-ignite-discovery.xml"/>

    <bean id="ignite.cfg.abstract" abstract="true" class="org.apache.ignite.configuration.IgniteConfiguration">
        <property name="igniteInstanceName" value="tester"/>
        <property name="localHost" value="127.0.0.1"/>

        <property name="marshaller">
            <bean class="org.apache.ignite.internal.marshaller.optimized.OptimizedMarshaller"/>
        </property>

        <property name="checkpointSpi">
            <bean class="org.apache.ignite.spi.checkpoint.sharedfs.SharedFsCheckpointSpi">
                <property name="directoryPaths">
                    <list>
                        <value>work/checkpoint/sharedfs</value>
                    </list>
                </property>
            </bean>
        </property>

        <property name="binaryConfiguration">
            <bean class="org.apache.ignite.configuration.BinaryConfiguration">
                <property name="compactFooter" value="false"/>
            </bean>
        </property>

        <property name="eventStorageSpi">
            <bean class="org.apache.ignite.spi.eventstorage.memory.MemoryEventStorageSpi"/>
        </property>

        <property name="peerClassLoadingEnabled" value="false"/>

        <property name="connectorConfiguration">
            <bean class="org.apache.ignite.configuration.ConnectorConfiguration">
                <property name="host" value="0.0.0.0"/>
            </bean>
        </property>

        <property name="discoverySpi" ref="dc1-topology"/>

        <property name="dataStorageConfiguration">
            <bean class="org.apache.ignite.configuration.DataStorageConfiguration">
                <property name="defaultDataRegionConfiguration">
                    <bean class="org.apache.ignite.configuration.DataRegionConfiguration">
                        <property name="name" value="Default_Region"/>
                        <property name="initialSize" value="104857600"/>
                        <property name="maxSize" value="2147483648"/>
                        <property name="metricsEnabled" value="true"/>
                        <property name="persistenceEnabled" value="true"/>
                    </bean>
                </property>

                <property name="dataRegionConfigurations">
                    <list>
                        <bean class="org.apache.ignite.configuration.DataRegionConfiguration">
                            <property name="name" value="100MB_Region_Eviction"/>
                            <property name="initialSize" value="20971520"/>
                            <property name="maxSize" value="104857600"/>
                            <property name="metricsEnabled" value="true"/>
                            <property name="persistenceEnabled" value="true"/>
                        </bean>
                        <bean class="org.apache.ignite.configuration.DataRegionConfiguration">
                            <property name="name" value="15MB_Region_Swapping"/>
                            <property name="initialSize" value="15728640"/>
                            <property name="maxSize" value="15728640"/>
                            <property name="metricsEnabled" value="true"/>
                            <property name="swapPath" value="work/memoryPolicyExampleSwap"/>
                            <property name="persistenceEnabled" value="true"/>
                        </bean>
                    </list>
                </property>

                <property name="metricsEnabled" value="true"/>
            </bean>
        </property>
    </bean>
</beans>
