# name: test/sql/types/blob/test_blob_string.test
# description: Insert BLOB values from normal strings
# group: [blob]

statement ok
PRAGMA enable_verification

statement ok
CREATE TABLE blobs (bb BYTEA);

# insert BLOB from string
statement ok
INSERT INTO blobs VALUES ('aaaaaaaaaa')

# sizes: 10, 100, 1000, 10000 -> double plus two due to hexadecimal representation
# The concat function casts BLOB to VARCHAR,resulting in aa hex string
statement ok
INSERT INTO blobs SELECT bb||bb||bb||bb||bb||bb||bb||bb||bb||bb FROM blobs WHERE OCTET_LENGTH(bb)=(SELECT MAX(OCTET_LENGTH(bb)) FROM blobs)

# The concat function casts BLOB to VARCHAR,resulting in aa hex string
statement ok
INSERT INTO blobs SELECT bb||bb||bb||bb||bb||bb||bb||bb||bb||bb FROM blobs WHERE OCTET_LENGTH(bb)=(SELECT MAX(OCTET_LENGTH(bb)) FROM blobs)

# The concat function casts BLOB to VARCHAR,resulting in aa hex string
statement ok
INSERT INTO blobs SELECT bb||bb||bb||bb||bb||bb||bb||bb||bb||bb FROM blobs WHERE OCTET_LENGTH(bb)=(SELECT MAX(OCTET_LENGTH(bb)) FROM blobs)

query I
SELECT OCTET_LENGTH(bb) FROM blobs ORDER BY 1
----
10
100
1000
10000

